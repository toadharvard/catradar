## Инструменты
### Taichi
Основным фреймворком для нашего приложения был выбран [Taichi](https://www.taichi-lang.org/) (встроенный в python язык программирования для высокопроизводительных численных вычислений). Основными причинами его выбора послужили простота реализаций на нём высокопроизводительных систем и его мультиплатформенность.

## Алгоритм

В качестве алгоритма для определения взаимодействующих котов была взята одна из реализаций поиска соседей на основе сеточного разбиения (grid-based neighborhood search). Конкретная реализация алгоритма была взята отсюда https://docs.taichi-lang.org/blog/acclerate-collision-detection-with-taichi


## Архитектура проекта
Важно понимать, что большинство решений, связанных с архитектурой, таких как, например, реализация сбора логов и подсчета состояний котов в одной функции, обусловлены "философией" taichi. А именно тем, что taichi следует парадигме DOP (Data-Oriented Programming). Поэтому этот инструмент не позволяет строить глубокие абстракции, так как фактически является оберткой над шейдерами видеокарты. Из-за чего в рамках проекта не встречаются собственные классы и по большей части они заменены модулями Python, предоставляющими интерфейс для работы с ними.

Для корректной работы большинства файлов прежде всего нужно проинициализировать их данные с помощью функции `setup_...()`.

Заметим, что несмотря на все этих ограничения, taichi позволяет быстро прототипировать, что активно ипользуется в нашем проекте. Сложный UI со множеством взаимоисключающих параметров реализован всего в сотню строк.

### `__main__.py`

Файл, содержащий главный цикл, который отвечает за обновление всех необходимых компонентов.

Именно здесь находятся функция для отрисовки UI для конфигурирования всего приложения.

### `canvas.py`
Файл отвечающий за отображение "холста" с котами.

Публичные функции:
- setup_data_for_scene: инициализация данных
- draw_borders: отрисовка границ области
- draw_circles: отрисовка котов/точек
- draw_bottom: отрисовка поля, по которому двигаются коты, при виде от 3его лица
- update_colors: обновление цвета котов в зависимости от состояния


### `grid_manager.py`
Файл отвечающий за обновление состояний у котов и сбор логов.

Публичные функции:
- setup_grid_data: инициализация данных
- compute_states: пересчёт состояний с использованием сетки
- update_logs: добавление в лог нового сообщения, если состояние котов изменилось. Фактически перекладывает из ti.Field данные о логах, в numpy ndarray для последующего вывода в UI.

### `positions_updater.py`
Файл отвечающий за обновление позиций у котов, а также обрабатку столкновения котов с границами.

Публичные функции:
- setup_positions_data: инициализация данных
- initialize_positions: инициализация(/сброс) позиций
- update_positions: обновление позиции котов на основе выбранного паттерна движения

### `borders_processor.py`
Файл, отвечающий за обнаружение и обработку столкновений котов с границами

Публичные функции:
- is_segment_intersect: пересекаются ли два отрезка (определение столкновения кота с границей)
- get_rotated_vector: получение нового вектора скорости для кота, который столкнулся с границей

### `view.py`
Файл отвечающий за изменения вида. Либо стандартного вида сверху вниз, либо от третьго лица.

Публичные функции:
- default_view: вид сверху вниз, так лучше всего видно все поле
- third_person_view: вид от третьего лица для наблюдения за движением конкретного кота

### Вспомогательные файлы
#### `common.py`
Содержит общие константы.
- "enum" возможных состояний котов
	- и его отображение в строки
- "enum" метрик расстояния
- "enum" паттернов перемещения котов
- "enum" возможных режимов работ программы
	- обычное
	- запуск для тестов

#### `utils.py`
Файл с общими вспомогательными вещами. В данный момент содержит только функцию `trace()` для отслеживания времени выполнения отдельных частей кода.
